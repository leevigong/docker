## 워드프레스 사이트 시스템 구성 및 데이터 흐름
<img src="https://hull.kr/data/editor/2410/20241018200212_4536f0e37b95d727ccf5a11734363655_qfsu.png">

1. 윈도우(호스트) = 가상 NAT 라우터 (게이트 웨이 IP: 192.168.135.1)
   - 역할 : VMware의 NAT 라우터로 외부 네트워크와 내부 네트워크 간 IP 변환(NAT)를 수행
   - 기능: 외부에서 들어오는 요청을 가상 네트워크로 전달하고, 내부 네트워크에서 나가는 트래픽을 외부 네트워크로 변환하여 전달
   - 입력 포트 IP: 172.25.80.1 (윈도우 랜카드의 IP)
   - 출력 포트 IP: 192.168.135.1 (VMware 내부 네트워크의 게이트웨이 IP)
2. 가상 스위치
   - 역할: 윈도우(호스트)와 우분투(게스트) 간의 네트워크 트래픽을 스위칭
   - 기능: VMware 내부에서 호스트와 게스트 간의 패킷을 MAC 주소 기반으로 전달하며, 물리적 스위치처럼 작동
3. 우분투(게스트)
   - 역할: Docker 네트워크 내부의 NAT 라우터로, 내부 컨테이너 간 패킷 라우팅을 수행하고, IP 변환을 통해 외부와 통신
   - 입력 포트 IP: 192.168.135.130 (VMware 우분투 IP)
   - 출력 포트 IP: 172.18.0.1 (Docker 가상 네트워크의 게이트웨이 IP)
   - NAT 기능: 내부 IP를 외부에 숨기고, 외부에서 들어오는 트래픽을 내부 적절한 IP로 전달
   - 포트포워드(Port Forword) 기능
      - NAT 기능의 일부
      - 외부 특정 포트로 들어오는 트래픽을 내부의 특정 IP와 포트로 전달
      - `docker run --name wordpress000ex12 -dit --net=wordpress000net1 -p 8085:80 ...`  
        : 8085 포트의 패킷을 -> wordpress000ex12:80으로 즉 결정된 IP와포트(172.18.0.3:80)로 패킷을 전달한다
4. 가상 스위치(Docker 네트워크 내)
    - 역할: Docker 네트워크 내부에서 컨테이너 간 패킷을 전달하는 스위치 역할
    - 기능: Docker 네트워크 내에서 각 컨테이너 간의 트래픽을 관리하고 MAC 주소를 기반으로 전달
5. 워드프레스 컨테이너(IP: 172.18.0.3)
    - 역할: 웹 애플리케이션 제공 컨테이너로, Docker 네트워크에서 실행
    - 기능: 웹 요청을 처리하고, 데이터베이스와 통신
6. MySQL 컨테이너(IP: 172.18.0.4)
    - 역할: 데이터베이스 제공 컨테이너로, 워드프레스 컨테이너와 통신
    - 기능: 데이터 저장 및 조회 작업을 처리
  
---
## IPv4 address
IPv4 : 일반적으로 점으로 구분된 10진수로 표시된 주소(사람이 쉽게 읽기위해) ex) 209.165.200.225  
** 내부적으로 4개의 8bit 옥텟으로 나누어진 32개(4개의 8비트 옥텟)의 2진수 비트로 표현 ex)11010001.10100101.11001000.11100001
- 계층적이다
- 네트워크 부분 + 호스트 부분으로 구성
** 동일한 네트워크의 모든 장치들은 동일한 네트워크 부분을 갖는다

#### 서브넷 마스크
장치가 네트워크 부분과 호스트 부분을 식별하는데 도움을 줌
- 네트워크 부분 모두 1, 호스트 부분 모두 0 -> IP 주소와 AND 연산
- 얼마나 많은 IP를 할당 받을 수 있는가? 는 호스트 부분이 결정
ex) 192.168.10.0/24
- 네트워크 부분 192.168.10 - 고정
- 남는 호스트 부분 8비트이므로 0~255(0~2^n-1) 에서 0: 네트워크 ip, 255: 브로드캐스트 ip빼고 254개(256-2)


#### DHCP(Dynamic Host Configuration Protocol) : 네트워크에 연결된 장치에 자동으로 IP 주소를 할당
- DHCP 서버를 통해 IPv4 주소를 동적으로 할당받음
- 따라서 네트워크 관리자가 매번 수동으로 IP 주소를 설정하지 않아도 되는 편리함을 제공.
  - 초기 장치가 네트워크에 연결되면 MAC주소만 존재 (IP주소 없음)
  - IP주소를 할당받아야 외부와 통신이 가능하므로 브로드캐스트로 DHCP서버에 접근하여 IP주소를 부여 받음  
  ** 고정 IP없이 필요할때마다 DHCP에게 동적으로 할당 받음
